<nav class="app-header navbar navbar-expand bg-body">
    <div class="container-fluid">
        <a href="#" class="navbar-brand d-flex align-items-center">
            <img src="assets/images/site_loginlogo.png" alt="CCMS Logo" class="header-logo" />
        </a>
        <span class="header-title d-none d-md-inline"></span>
        <div class="header-title d-none d-md-inline">
            <h2> Court Cases Monitoring System </h2>
        </div>
        <ul class="navbar-nav ms-auto">
            <li class="nav-item">
                <div class="d-flex align-items-center gap-2">
                    <select class="form-select state-select" [(ngModel)]="selectedStateCode" name="state">
                        <option value="0" disabled>Select State</option>
                        <option *ngFor="let state of states" [value]="state.value">
                            {{ state.text }}
                        </option>
                    </select>

                    <button class="btn btn-login" (click)="openLogin(content)">
                        <i class="fa fa-sign-in mr-2" aria-hidden="true"></i>Login
                    </button>
                </div>
            </li>
        </ul>
    </div>
</nav>
<ng-template #content let-modal>
    <div class="modal-header p-0">
        <div class="login-header d-flex align-items-center w-100">

            <!-- Login with label -->
            <div class="me-3">
                <h6 class="mb-0 fw-semibold">Login with</h6>
            </div>

            <!-- Radio buttons styled as inline tabs -->
            <div class="d-flex align-items-center">
                <div class="form-check me-3">
                    <input class="form-check-input" type="radio" name="loginType" id="loginUser" [value]="'user'"
                        [(ngModel)]="loginType" (change)="isOtpTextVisible = false">
                    <label class="form-check-label" for="loginUser">User ID</label>
                </div>

                <div class="form-check">
                    <input class="form-check-input" type="radio" name="loginType" id="loginMobile" [value]="'mobile'"
                        [(ngModel)]="loginType" (change)="isOtpTextVisible = false">
                    <label class="form-check-label" for="loginMobile">Mobile Number</label>
                </div>
            </div>
            <button type="button" class="btn-close ms-auto me-2" (click)="modal.dismiss()"></button>

        </div>
    </div>
    <div class="modal-body">
        <div class="text-center mb-3">
            <img src="assets/images/site_loginlogo.png" height="70" />
        </div>
        <div *ngIf="loginType === 'mobile'">
            <div *ngIf="!isOtpTextVisible">
                <input type="text" class="form-control mb-3" placeholder="Enter Mobile Number" />
                <div class="d-flex gap-2 mb-3">
                    <input type="text" class="form-control" placeholder="Enter Captcha" [(ngModel)]="captch_input"
                        maxlength="10">
                    <div class="col-sm-5"><img [src]="captchaUrl" alt="Captcha" /></div>
                    <button class="btn btn-light" (click)="createCaptcha()">
                        <i class="fa fa-refresh"></i>
                    </button>
                </div>
                <button class="btn btn-success w-100" (click)="verifyMobile()">Send OTP</button>
            </div>
            <div *ngIf="isOtpTextVisible">
                <div class="d-flex justify-content-center mb-3 otp-filler otp-container">
                    <input type="password" class="form-control otp-input" [(ngModel)]="otp1" maxlength="1"
                        (keydown)="moveFocus($event, otp2Input, null)" #otp1Input />

                    <input type="password" class="form-control otp-input" [(ngModel)]="otp2" maxlength="1"
                        (keydown)="moveFocus($event, otp3Input, otp1Input)" #otp2Input />

                    <input type="password" class="form-control otp-input" [(ngModel)]="otp3" maxlength="1"
                        (keydown)="moveFocus($event, otp4Input, otp2Input)" #otp3Input />

                    <input type="password" class="form-control otp-input" [(ngModel)]="otp4" maxlength="1"
                        (keydown)="moveFocus($event, otp5Input, otp3Input)" #otp4Input />

                    <input type="password" class="form-control otp-input" [(ngModel)]="otp5" maxlength="1"
                        (keydown)="moveFocus($event, otp6Input, otp4Input)" #otp5Input />

                    <input type="password" class="form-control otp-input" [(ngModel)]="otp6" maxlength="1"
                        (keydown)="moveFocus($event, null, otp5Input)" #otp6Input />
                </div>
                <div class="d-flex justify-content-center">
                    <button class="btn btn-primary text-white mx-1" *ngIf="isOtpReSendButton">Resend OTP</button>
                    <button class="btn btn-success text-white mx-1" (click)="verfiyOTPUser()" *ngIf="isOtpVerfiy">Verify
                        OTP</button>

                </div>
            </div>
        </div>

        <div *ngIf="loginType === 'user'">
            <input type="text" class="form-control mb-3" [(ngModel)]="uid" name="uid" placeholder="Enter User ID"
                required />
            <input type="password" class="form-control mb-3" [(ngModel)]="password" name="password" required
                placeholder="Enter Password" />
            <div class="d-flex gap-2 mb-3">
                <input type="text" class="form-control" placeholder="Enter Captcha" [(ngModel)]="captch_input"
                    maxlength="10">
                <div class="col-sm-5"><img [src]="captchaUrl" alt="Captcha" /></div>

                <button class="btn btn-light" (click)="createCaptcha()">
                    <i class="fa fa-refresh"></i>
                </button>
            </div>

            <button class="btn btn-primary w-100" (click)="verifypassword()">
                Login
            </button>
        </div>
    </div>
</ng-template>